<html>
<head>
    <title>Edit File</title>
</head>
<body>
    <form method="POST" action="/edit_file">
        <select id="filename-select" name="filename" onchange="loadFileContent()">
            {% for filename in text_files %}
                <option value="{{ filename }}">{{ filename }}</option>
            {% endfor %}
        </select>
        <br><br>
        <textarea id="file-content" name="text" rows="10" cols="50"></textarea>
        <br><br>
        <input type="submit" value="Save Changes">
    </form>

    <script>
        // Fetches the file content and updates the textarea
        function loadFileContent() {
            var select = document.getElementById("filename-select");
            var textarea = document.getElementById("file-content");

            var selectedFile = select.value;
            if (selectedFile) {
                fetch(`/get_file_content/${selectedFile}`)
                    .then(response => response.text())
                    .then(content => {
                        textarea.value = content;
                    });
            } else {
                textarea.value = "";
            }
        }
    </script>
</body>
</html>
